{% load static %}
{% load recommendation_tags %}

{% if recommended_vendors %}
<div class="vendor-recommendation-section mb-5">
    <div class="container">
        <div class="element-title align-left d-flex flex-wrap align-items-start justify-content-between">
            <div>
                <h2>{{ title }}</h2>
                <p style="color: #e23744; font-size: 13px; margin-top: -5px;">
                    <i class="fa-solid fa-wand-magic-sparkles me-1"></i>Personalised for you
                </p>
            </div>
            <span style="display:inline-flex;align-items:center;gap:6px;background:#fff3f4;border:1px solid #ffc5c8;border-radius:20px;padding:5px 14px;font-size:12px;color:#c0392b;font-weight:600;white-space:nowrap;margin-top:6px;">
                <i class="fa-solid fa-store"></i> Vendor Collaborative Filtering
                <i class="fa-solid fa-circle-info ms-1" style="color:#aaa;cursor:pointer;" data-bs-toggle="tooltip" data-bs-placement="top" title="Restaurants loved by users with similar ordering patterns to yours"></i>
            </span>
        </div>
        <div class="listing fancy">
            <ul class="row">
                {% for vendor in recommended_vendors %}
                <li class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                    <div class="list-post featured">
                        <div class="img-holder">
                            <figure>
                                <a href="{% url 'vendor_detail' vendor.vendor_slug %}">
                                    {% if vendor.user_profile.profile_picture %}
                                    <img src="{{ vendor.user_profile.profile_picture.url }}" class="img-thumb wp-post-image" alt="">
                                    {% else %}
                                    <img src="{% static 'images/default-profile.png' %}" class="img-thumb wp-post-image" alt="">
                                    {% endif %}
                                </a>
                                {% if vendor.is_open %}
                                <span class="restaurant-status open">
                                    <em class="bookmarkRibbon"></em>Open
                                </span>
                                {% else %}
                                <span class="restaurant-status close">
                                    <em class="bookmarkRibbon"></em>Close
                                </span>
                                {% endif %}
                            </figure>
                        </div>
                        <div class="text-holder">
                            <div class="post-title">
                                <h5><a href="{% url 'vendor_detail' vendor.vendor_slug %}">{{ vendor.vendor_name }}</a></h5>
                            </div>
                            {% vendor_rating vendor.id %}
                        </div>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endif %}
