{% extends 'base.html' %}
{% load static %}


{% block content %}
<!-- Main Section Start -->
<div class="main-section">
	<!-- Main Search Start -->
	<div class="page-section nopadding cs-nomargin main-search-bar" style="padding-top: 200px; padding-bottom: 150px; margin-bottom: 0px; background: url({% static 'extra-images/bg-image1.jpg' %}) no-repeat center / cover;">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
					<div class="element-title">
						<h1 style="text-transform: uppercase; text-align:center; margin-bottom: 16px;">
							Discover Amazing Food<br>From Local Restaurants</h1>
						<p style="text-align:center;">
							Order from your favorite restaurants and get it delivered to your doorstep.</p>
						<p style="text-align:center; margin-top: 10px;">
							<span style="background: rgba(255,255,255,0.95); padding: 8px 20px; border-radius: 25px; display: inline-block; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
								<i class="fa-solid fa-wand-magic-sparkles me-2" style="color: #e23744;"></i>
								<strong style="color: #333;">Personalised for You</strong>
							</span>
						</p>
					</div>
				</div>
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
					<div class="main-search fancy bg-holder">
						<form action="{% url 'search' %}" method="GET">
							<div class="row g-3 align-items-end">
								<div class="col-lg-4 col-md-4 col-sm-3 col-xs-12">
									<div class="field-holder">
										<input type="text" name="keyword" placeholder="Restaurant name or food name">
									</div>
								</div>
								<div class="col-lg-4 col-md-4 col-sm-5 col-xs-12">
									<div class="field-holder">
										<ul style="list-style: none; margin: 0; padding: 0;">
											<li class="select-location">
												<div class="foodbakery-locations-fields-group foodbakery-focus-out">
													<span class="foodbakery-search-location-icon"><i class="icon-location"></i></span>

													<input type="text" name="address" class="location-field-text filter" id="id_address" required placeholder="All Locations">
													<input type="hidden" name="lat" value="" id="id_latitude">
													<input type="hidden" name="lng" value="" id="id_longitude">
												</div>

											</li>
										</ul>
									</div>
								</div>
								<div class="col-lg-2 col-md-2 col-sm-2 col-xs-12">
									<select name="radius" id="radius" class="form-select" style="height: 50px;" required>
										<option value="" selected>Radius</option>
										<option value="5">5 km</option>
										<option value="10">10 km</option>
										<option value="15">15 km</option>
										<option value="25">25 km</option>
										<option value="50">50 km</option>
										<option value="75">75 km</option>
										<option value="100">100 km</option>
									</select>
								</div>
								<div class="col-lg-2 col-md-2 col-sm-2 col-xs-12">
									<div class="field-holder">
										<input type="submit" value="Search">
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>

			</div>
		</div>
	</div>
	<!-- Main Search End -->

	<!-- Top Restaurants Section Start -->
	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 60px;padding-bottom: 0px;margin-bottom: 0px;background: #ffffff;">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="element-title align-left">
						<h2>Top Restaurants</h2>
						<p>Explore restaurants, bars, and caf&eacute;s by locality</p>
					</div>
				</div>
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding-right: 0 !important; padding-left: 0 !important;">
					<div class="company-logo">
						<ul>
							{% for vendor in vendors %}
							<li class="has-border">
								<figure>
									{% if vendor.user_profile.profile_picture %}
									<a href="{% url 'vendor_detail' vendor.vendor_slug %}"><img src="{{ vendor.user_profile.profile_picture.url }}" height="125" class="attachment-full size-full wp-post-image" alt="{{ vendor }}"></a>
									{% else %}
									<a href="{% url 'vendor_detail' vendor.vendor_slug %}"><img src="{% static 'images/default-profile.png' %}" height="125" class="attachment-full size-full wp-post-image" alt="{{ vendor }}"></a>
									{% endif %}
								</figure>
							</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Top Restaurants Section End -->

	<!-- Popular Restaurants Start -->
	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 60px;padding-bottom: 50px;margin-bottom: 0px;background: var(--gray-100, #f8f9fa);">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="element-title align-center">
						<h2>Choose From Most Popular Restaurants</h2>
						<p>Find the best restaurants near you and order your favorite meals.</p>
					</div>
				</div>
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="listing fancy">
						<ul class="row">
							{% for vendor in vendors %}
							<li class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
								<div class="list-post featured">
									<div class="img-holder">
										<figure>
											<a href="{% url 'vendor_detail' vendor.vendor_slug %}">
												{% if vendor.user_profile.profile_picture %}
												<img src="{{ vendor.user_profile.profile_picture.url }}" class="img-thumb wp-post-image" alt="{{ vendor }}">
												{% else %}
												<img src="{% static 'images/default-profile.png' %}" class="img-thumb wp-post-image" alt="{{ vendor }}">
												{% endif %}
											</a>
										</figure>
										{% if vendor.is_open %}
										<span class="restaurant-status open">
											<em class="bookmarkRibbon"></em>Open
										</span>
										{% else %}
										<span class="restaurant-status close">
											<em class="bookmarkRibbon"></em>Closed
										</span>
										{% endif %}

									</div>
									<div class="text-holder">

										<div class="post-title">
											<h5>
												<a href="{% url 'vendor_detail' vendor.vendor_slug %}">{{ vendor }}</a>
											</h5>
										</div>
										{% if vendor.user_profile.city and vendor.user_profile.state and vendor.user_profile.pin_code %}
										<span class="text-muted"><i class="fa-solid fa-location-dot me-1"></i>{{ vendor.user_profile.city }}, {{ vendor.user_profile.state }}, {{ vendor.user_profile.pin_code }}</span>
										{% endif %}

										{% if vendor.kms %}
											<br>
											<span class="text-muted"><small><strong>{{vendor.kms}} km</strong> away</small></span>
										{% endif %}
									</div>
									<div class="list-option">
										<a href="javascript:void(0);" class="shortlist-btn" data-bs-toggle="modal" data-bs-target="#sign-in">
											<i class="icon-heart-o"></i>
										</a>
									</div>
								</div>
							</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Popular Restaurants End -->

	<!-- AI Recommendation Section Header -->
	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 60px;padding-bottom: 20px;background: linear-gradient(135deg, #e23744 0%, #ff6b6b 100%);">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="element-title align-center">
						<h2 style="color: white; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.1);">
							<i class="fa-solid fa-wand-magic-sparkles me-2"></i>Smart Recommendations
						</h2>
						<p style="color: rgba(255,255,255,0.95); font-size: 16px;">
							Personalized food suggestions powered by intelligent algorithms
						</p>
					</div>
				</div>
			</div>

			<!-- How AI Works â€” visual explainer -->
			<div class="row justify-content-center mt-2 pb-4">
				<!-- Step 1 -->
				<div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mb-3">
					<div class="text-center p-3" style="background: rgba(255,255,255,0.15); border-radius: 12px; backdrop-filter: blur(4px);">
						<div style="width:54px;height:54px;border-radius:50%;background:rgba(255,255,255,0.25);display:flex;align-items:center;justify-content:center;margin:0 auto 10px;">
							<i class="fa-solid fa-clock-rotate-left" style="color:#fff;font-size:22px;"></i>
						</div>
						<h6 style="color:#fff;font-size:13px;font-weight:700;margin-bottom:4px;">Order History</h6>
						<p style="color:rgba(255,255,255,0.85);font-size:11px;margin:0;">Analyzes what you ordered before to re-suggest your favorites.</p>
					</div>
				</div>
				<!-- Step 2 -->
				<div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mb-3">
					<div class="text-center p-3" style="background: rgba(255,255,255,0.15); border-radius: 12px; backdrop-filter: blur(4px);">
						<div style="width:54px;height:54px;border-radius:50%;background:rgba(255,255,255,0.25);display:flex;align-items:center;justify-content:center;margin:0 auto 10px;">
							<i class="fa-solid fa-users" style="color:#fff;font-size:22px;"></i>
						</div>
						<h6 style="color:#fff;font-size:13px;font-weight:700;margin-bottom:4px;">Users Like You</h6>
						<p style="color:rgba(255,255,255,0.85);font-size:11px;margin:0;">Finds people with similar tastes and recommends what they loved.</p>
					</div>
				</div>
				<!-- Step 3 -->
				<div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mb-3">
					<div class="text-center p-3" style="background: rgba(255,255,255,0.15); border-radius: 12px; backdrop-filter: blur(4px);">
						<div style="width:54px;height:54px;border-radius:50%;background:rgba(255,255,255,0.25);display:flex;align-items:center;justify-content:center;margin:0 auto 10px;">
							<i class="fa-solid fa-tags" style="color:#fff;font-size:22px;"></i>
						</div>
						<h6 style="color:#fff;font-size:13px;font-weight:700;margin-bottom:4px;">Your Taste Profile</h6>
						<p style="color:rgba(255,255,255,0.85);font-size:11px;margin:0;">Detects your favorite categories and finds new items you haven't tried.</p>
					</div>
				</div>
				<!-- Step 4 -->
				<div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mb-3">
					<div class="text-center p-3" style="background: rgba(255,255,255,0.15); border-radius: 12px; backdrop-filter: blur(4px);">
						<div style="width:54px;height:54px;border-radius:50%;background:rgba(255,255,255,0.25);display:flex;align-items:center;justify-content:center;margin:0 auto 10px;">
							<i class="fa-solid fa-fire-flame-curved" style="color:#fff;font-size:22px;"></i>
						</div>
						<h6 style="color:#fff;font-size:13px;font-weight:700;margin-bottom:4px;">Trending Now</h6>
						<p style="color:rgba(255,255,255,0.85);font-size:11px;margin:0;">Tracks orders from the last 30 days to surface what's hot right now.</p>
					</div>
				</div>
				<!-- Step 5 -->
				<div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mb-3">
					<div class="text-center p-3" style="background: rgba(255,255,255,0.15); border-radius: 12px; backdrop-filter: blur(4px);">
						<div style="width:54px;height:54px;border-radius:50%;background:rgba(255,255,255,0.25);display:flex;align-items:center;justify-content:center;margin:0 auto 10px;">
							<i class="fa-solid fa-star" style="color:#fff;font-size:22px;"></i>
						</div>
						<h6 style="color:#fff;font-size:13px;font-weight:700;margin-bottom:4px;">Top Rated</h6>
						<p style="color:rgba(255,255,255,0.85);font-size:11px;margin:0;">Ranks items by real customer reviews and ratings to show the best.</p>
					</div>
				</div>
				<!-- Step 6 -->
				<div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mb-3">
					<div class="text-center p-3" style="background: rgba(255,255,255,0.15); border-radius: 12px; backdrop-filter: blur(4px);">
						<div style="width:54px;height:54px;border-radius:50%;background:rgba(255,255,255,0.25);display:flex;align-items:center;justify-content:center;margin:0 auto 10px;">
							<i class="fa-solid fa-basket-shopping" style="color:#fff;font-size:22px;"></i>
						</div>
						<h6 style="color:#fff;font-size:13px;font-weight:700;margin-bottom:4px;">Bought Together</h6>
						<p style="color:rgba(255,255,255,0.85);font-size:11px;margin:0;">Spots combos that other customers commonly order together.</p>
					</div>
				</div>
			</div>
			<!-- How AI Works End -->
		</div>
	</div>
	<!-- AI Recommendation Section Header End -->

	<!-- Recommendation Sections -->
	{% load recommendation_tags %}

	{% if user.is_authenticated %}
	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #ffffff;">
		{% recommendation_section "order_again" "Order Again" %}
	</div>

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #f8f9fa;">
		{% recommendation_section "for_you" "ðŸ¤– AI Recommended For You" %}
	</div>

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #ffffff;">
		{% recommendation_section "category_based" "Based On Your Taste" %}
	</div>

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #f8f9fa;">
		{% vendor_recommendations "Restaurants You Might Like" %}
	</div>
	{% endif %}

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #ffffff;">
		{% recommendation_section "trending" "Trending Now" %}
	</div>

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 50px;background: #f8f9fa;">
		{% recommendation_section "top_rated" "Top Rated Items" %}
	</div>
	<!-- Recommendation Sections End -->

</div>
<!-- Main Section End -->
{% endblock %}