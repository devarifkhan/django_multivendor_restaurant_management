{% extends 'base.html' %}
{% load static %}


{% block content %}
<!-- Main Section Start -->
<div class="main-section">
	<!-- Main Search Start -->
	<div class="page-section nopadding cs-nomargin main-search-bar" style="padding-top: 200px; padding-bottom: 150px; margin-bottom: 0px; background: url({% static 'extra-images/bg-image1.jpg' %}) no-repeat center / cover;">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
					<div class="element-title">
						<h1 style="text-transform: uppercase; text-align:center; margin-bottom: 16px;">
							Discover Amazing Food<br>From Local Restaurants</h1>
						<p style="text-align:center;">
							Order from your favorite restaurants and get it delivered to your doorstep.</p>
						<p style="text-align:center; margin-top: 10px;">
							<span style="background: rgba(255,255,255,0.95); padding: 8px 20px; border-radius: 25px; display: inline-block; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
								<i class="fa-solid fa-wand-magic-sparkles me-2" style="color: #e23744;"></i>
								<strong style="color: #333;">Personalised for You</strong>
							</span>
						</p>
					</div>
				</div>
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
					<div class="main-search fancy bg-holder">
						<form action="{% url 'search' %}" method="GET">
							<div class="row g-3 align-items-end">
								<div class="col-lg-4 col-md-4 col-sm-3 col-xs-12">
									<div class="field-holder">
										<input type="text" name="keyword" placeholder="Restaurant name or food name">
									</div>
								</div>
								<div class="col-lg-4 col-md-4 col-sm-5 col-xs-12">
									<div class="field-holder">
										<ul style="list-style: none; margin: 0; padding: 0;">
											<li class="select-location">
												<div class="foodbakery-locations-fields-group foodbakery-focus-out">
													<span class="foodbakery-search-location-icon"><i class="icon-location"></i></span>

													<input type="text" name="address" class="location-field-text filter" id="id_address" required placeholder="All Locations">
													<input type="hidden" name="lat" value="" id="id_latitude">
													<input type="hidden" name="lng" value="" id="id_longitude">
												</div>

											</li>
										</ul>
									</div>
								</div>
								<div class="col-lg-2 col-md-2 col-sm-2 col-xs-12">
									<select name="radius" id="radius" class="form-select" style="height: 50px;" required>
										<option value="" selected>Radius</option>
										<option value="5">5 km</option>
										<option value="10">10 km</option>
										<option value="15">15 km</option>
										<option value="25">25 km</option>
										<option value="50">50 km</option>
										<option value="75">75 km</option>
										<option value="100">100 km</option>
									</select>
								</div>
								<div class="col-lg-2 col-md-2 col-sm-2 col-xs-12">
									<div class="field-holder">
										<input type="submit" value="Search">
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>

			</div>
		</div>
	</div>
	<!-- Main Search End -->

	<!-- Smart Recommendations Header -->
	<div class="page-section nopadding cs-nomargin" style="padding-top:50px;padding-bottom:50px;background:#ffffff;">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-5 col-md-6 col-sm-12 mb-4 mb-md-0">
					<span style="display:inline-flex;align-items:center;gap:8px;background:rgba(226,55,68,0.08);border:1px solid rgba(226,55,68,0.25);border-radius:20px;padding:5px 14px;font-size:12px;color:#e23744;font-weight:600;margin-bottom:16px;">
						<i class="fa-solid fa-wand-magic-sparkles"></i> Smart Recommendations
					</span>
					<h2 style="color:#1a1a2e;font-size:28px;font-weight:700;line-height:1.35;margin-bottom:12px;">
						Your feed, curated<br>just for you
					</h2>
					<p style="color:#6b7280;font-size:14px;line-height:1.7;margin:0;">
						Every section below is powered by a different algorithm â€” from what you've ordered before to what people like you love right now.
					</p>
				</div>
				<div class="col-lg-7 col-md-6 col-sm-12">
					<div class="row g-3">
						<!-- Card 1 -->
						<div class="col-6 col-md-4">
							<div style="background:#f8f9fa;border-radius:12px;padding:16px;height:100%;border:1px solid rgba(0,0,0,0.06);">
								<div style="width:38px;height:38px;border-radius:10px;background:rgba(226,55,68,0.12);display:flex;align-items:center;justify-content:center;margin-bottom:10px;">
									<i class="fa-solid fa-clock-rotate-left" style="color:#e23744;font-size:16px;"></i>
								</div>
								<p style="color:#1a1a2e;font-size:13px;font-weight:600;margin-bottom:4px;">Order History</p>
								<p style="color:#6b7280;font-size:11px;margin:0;line-height:1.5;">Re-suggests items you've ordered and loved before.</p>
							</div>
						</div>
						<!-- Card 2 -->
						<div class="col-6 col-md-4">
							<div style="background:#f8f9fa;border-radius:12px;padding:16px;height:100%;border:1px solid rgba(0,0,0,0.06);">
								<div style="width:38px;height:38px;border-radius:10px;background:rgba(59,130,246,0.12);display:flex;align-items:center;justify-content:center;margin-bottom:10px;">
									<i class="fa-solid fa-users" style="color:#3b82f6;font-size:16px;"></i>
								</div>
								<p style="color:#1a1a2e;font-size:13px;font-weight:600;margin-bottom:4px;">Users Like You</p>
								<p style="color:#6b7280;font-size:11px;margin:0;line-height:1.5;">Items loved by people who share your food taste.</p>
							</div>
						</div>
						<!-- Card 3 -->
						<div class="col-6 col-md-4">
							<div style="background:#f8f9fa;border-radius:12px;padding:16px;height:100%;border:1px solid rgba(0,0,0,0.06);">
								<div style="width:38px;height:38px;border-radius:10px;background:rgba(168,85,247,0.12);display:flex;align-items:center;justify-content:center;margin-bottom:10px;">
									<i class="fa-solid fa-tags" style="color:#a855f7;font-size:16px;"></i>
								</div>
								<p style="color:#1a1a2e;font-size:13px;font-weight:600;margin-bottom:4px;">Taste Profile</p>
								<p style="color:#6b7280;font-size:11px;margin:0;line-height:1.5;">New items from the food categories you order most.</p>
							</div>
						</div>
						<!-- Card 4 -->
						<div class="col-6 col-md-4">
							<div style="background:#f8f9fa;border-radius:12px;padding:16px;height:100%;border:1px solid rgba(0,0,0,0.06);">
								<div style="width:38px;height:38px;border-radius:10px;background:rgba(251,146,60,0.12);display:flex;align-items:center;justify-content:center;margin-bottom:10px;">
									<i class="fa-solid fa-fire-flame-curved" style="color:#fb923c;font-size:16px;"></i>
								</div>
								<p style="color:#1a1a2e;font-size:13px;font-weight:600;margin-bottom:4px;">Trending Now</p>
								<p style="color:#6b7280;font-size:11px;margin:0;line-height:1.5;">Most ordered items across the platform this month.</p>
							</div>
						</div>
						<!-- Card 5 -->
						<div class="col-6 col-md-4">
							<div style="background:#f8f9fa;border-radius:12px;padding:16px;height:100%;border:1px solid rgba(0,0,0,0.06);">
								<div style="width:38px;height:38px;border-radius:10px;background:rgba(234,179,8,0.12);display:flex;align-items:center;justify-content:center;margin-bottom:10px;">
									<i class="fa-solid fa-star" style="color:#eab308;font-size:16px;"></i>
								</div>
								<p style="color:#1a1a2e;font-size:13px;font-weight:600;margin-bottom:4px;">Top Rated</p>
								<p style="color:#6b7280;font-size:11px;margin:0;line-height:1.5;">Highest rated by verified customer reviews.</p>
							</div>
						</div>
						<!-- Card 6 -->
						<div class="col-6 col-md-4">
							<div style="background:#f8f9fa;border-radius:12px;padding:16px;height:100%;border:1px solid rgba(0,0,0,0.06);">
								<div style="width:38px;height:38px;border-radius:10px;background:rgba(20,184,166,0.12);display:flex;align-items:center;justify-content:center;margin-bottom:10px;">
									<i class="fa-solid fa-basket-shopping" style="color:#14b8a6;font-size:16px;"></i>
								</div>
								<p style="color:#1a1a2e;font-size:13px;font-weight:600;margin-bottom:4px;">Bought Together</p>
								<p style="color:#6b7280;font-size:11px;margin:0;line-height:1.5;">Popular combos other customers order at the same time.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Smart Recommendations Header End -->

	<!-- Top Restaurants Section Start -->
	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 60px;padding-bottom: 0px;margin-bottom: 0px;background: #ffffff;">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="element-title align-left">
						<h2>Top Restaurants</h2>
						<p>Explore restaurants, bars, and caf&eacute;s by locality</p>
					</div>
				</div>
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding-right: 0 !important; padding-left: 0 !important;">
					<div class="company-logo">
						<ul>
							{% for vendor in vendors %}
							<li class="has-border">
								<figure>
									{% if vendor.user_profile.profile_picture %}
									<a href="{% url 'vendor_detail' vendor.vendor_slug %}"><img src="{{ vendor.user_profile.profile_picture.url }}" height="125" class="attachment-full size-full wp-post-image" alt="{{ vendor }}"></a>
									{% else %}
									<a href="{% url 'vendor_detail' vendor.vendor_slug %}"><img src="{% static 'images/default-profile.png' %}" height="125" class="attachment-full size-full wp-post-image" alt="{{ vendor }}"></a>
									{% endif %}
								</figure>
							</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Top Restaurants Section End -->

	<!-- Popular Restaurants Start -->
	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 60px;padding-bottom: 50px;margin-bottom: 0px;background: var(--gray-100, #f8f9fa);">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="element-title align-center">
						<h2>Choose From Most Popular Restaurants</h2>
						<p>Find the best restaurants near you and order your favorite meals.</p>
					</div>
				</div>
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="listing fancy">
						<ul class="row">
							{% for vendor in vendors %}
							<li class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
								<div class="list-post featured">
									<div class="img-holder">
										<figure>
											<a href="{% url 'vendor_detail' vendor.vendor_slug %}">
												{% if vendor.user_profile.profile_picture %}
												<img src="{{ vendor.user_profile.profile_picture.url }}" class="img-thumb wp-post-image" alt="{{ vendor }}">
												{% else %}
												<img src="{% static 'images/default-profile.png' %}" class="img-thumb wp-post-image" alt="{{ vendor }}">
												{% endif %}
											</a>
										</figure>
										{% if vendor.is_open %}
										<span class="restaurant-status open">
											<em class="bookmarkRibbon"></em>Open
										</span>
										{% else %}
										<span class="restaurant-status close">
											<em class="bookmarkRibbon"></em>Closed
										</span>
										{% endif %}

									</div>
									<div class="text-holder">

										<div class="post-title">
											<h5>
												<a href="{% url 'vendor_detail' vendor.vendor_slug %}">{{ vendor }}</a>
											</h5>
										</div>
										{% if vendor.user_profile.city and vendor.user_profile.state and vendor.user_profile.pin_code %}
										<span class="text-muted"><i class="fa-solid fa-location-dot me-1"></i>{{ vendor.user_profile.city }}, {{ vendor.user_profile.state }}, {{ vendor.user_profile.pin_code }}</span>
										{% endif %}

										{% if vendor.kms %}
											<br>
											<span class="text-muted"><small><strong>{{vendor.kms}} km</strong> away</small></span>
										{% endif %}
									</div>
									<div class="list-option">
										<a href="javascript:void(0);" class="shortlist-btn" data-bs-toggle="modal" data-bs-target="#sign-in">
											<i class="icon-heart-o"></i>
										</a>
									</div>
								</div>
							</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Popular Restaurants End -->

	<!-- Recommendation Sections -->
	{% load recommendation_tags %}

	{% if user.is_authenticated %}
	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #ffffff;">
		{% recommendation_section "order_again" "Order Again" %}
	</div>

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #f8f9fa;">
		{% recommendation_section "for_you" "ðŸ¤– AI Recommended For You" %}
	</div>

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #ffffff;">
		{% recommendation_section "category_based" "Based On Your Taste" %}
	</div>

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #f8f9fa;">
		{% vendor_recommendations "Restaurants You Might Like" %}
	</div>
	{% endif %}

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 30px;background: #ffffff;">
		{% recommendation_section "trending" "Trending Now" %}
	</div>

	<div class="page-section nopadding cs-nomargin" style="margin-top: 0px;padding-top: 30px;padding-bottom: 50px;background: #f8f9fa;">
		{% recommendation_section "top_rated" "Top Rated Items" %}
	</div>
	<!-- Recommendation Sections End -->

</div>
<!-- Main Section End -->
{% endblock %}